---
title: network system

---



# Linux network system 



## 1. 层级架构



众所周知，网络是一个非常复杂的分层架构，按照标准的 OSI 7层模型，可以分为：

1. 应用层
2. 表示层
3. 会话层
4. 传输层
5. 网络层
6. 数据链路层
7. 物理层



但这仅仅是规范，具体实现的时候，大多采取了简化的措施，比如，Linux 中的网络协议栈，就是简化之后的模型，大致可以分为：

1. 用户层
2. TCP/UDP 传输层
3. IP 网络层
4. 网络层
5. 驱动设备层



## 2. 详述



### 2.1 系统调用层



用户层的任务想必大家都很清楚了，比如 http，http2，ssh，各种各样的用户层协议，在用户程序中执行。那么，具体这些协议是如何接触到更 low-level 的一些层级呢？诶，这里就不得不提 **系统调用层** 了。



操作系统和用户程序之间通过系统调用进行通信，对于网络数据包，自然也是如此。但是，如此纷繁复杂的协议类型，用户空间中各种千奇百怪的实现机制，操作系统都需要关心吗？

事实上，Linux 为用户提供了一个优雅统一的接口：socket。我们可以将其称为系统调用层。这一层主要的任务是屏蔽各种底层的协议，对用户提供一个统一的接口。简单来说，不管在用户层使用什么样的协议，都是通过 socket 这个结构表示，只是对应到不同的协议，会有不同的具体行为，大致的处理路径还是相似的。







## 2. 网络协议层



为了简单起见，



